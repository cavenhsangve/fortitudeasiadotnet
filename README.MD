# DotNetTest API Project

## Overview
This project is a .NET Core API application with logging capabilities using **Log4net** for capturing application logs. The application is containerized with Docker for easy deployment.

---

## Log4net Instructions

The application uses **Log4net** for logging request and response details to a file.

### Steps to Configure Log File Path
1. Open the `log4net.config` file in the project directory.
2. Locate the following line (line 10):
   ```xml
   <file value="logs/logfile.txt" />
   ```
3. Replace the `value` with the desired file path where logs should be saved. For example:
   ```xml
   <file value="C:/my-logs/application-log.txt" />
   ```
4. Ensure the specified directory exists or the application has permissions to create the file.

---

## Docker Container Instructions

### 1. Build Docker Image
To build the Docker image, execute the following command:
```bash
docker build -t [image-name] -f Dockerfile .
```
Replace `[image-name]` with your preferred name for the image.

### 2. Create Docker Container
Create a container from the built image:
```bash
docker create --name [container-name] -p 5001:5001 [image-name]
```
Replace `[container-name]` and `[image-name]` with the desired container and image names.

### 3. Run Docker Container
Start the container:
```bash
docker start [container-name]
```

---

## Accessing the API

### Endpoint
Once the container is running, access the API at:
```
http://localhost:5001
```

### HTTP Method
- **POST**: To interact with the API.

### Sample Body Request
```json
{
  "partnerkey": "FAKEGOOGLE",
  "partnerrefno": "FG-00001",
  "partnerpassword": "RkFLRVBBU1NXT1JEMTIzNA==",
  "totalamount": 1000,
  "items": [
    {
      "partneritemref": "i-00001",
      "name": "Pen",
      "qty": 4,
      "unitprice": 200
    },
    {
      "partneritemref": "i-00002",
      "name": "Ruler",
      "qty": 2,
      "unitprice": 100
    }
  ],
  "timestamp": "2024-12-28T09:25:00.0000000Z",
  "sig": "N2ZmOWQzZjVjZjczZjk4NDQ0YzZjZmQxOGE1NzkxZGJiOTNlM2JjYTYxM2M5NDg4MGYwNGJjYzA4ZmY1MjEzMg=="
}
```

### Notes
1. **Timestamp Validation**: The `timestamp` must be within +/- 5 minutes of UTC now.
2. **Signature Generation**: The `sig` field is generated by concatenating the following values:
   - `timestamp`
   - `partnerkey`
   - `partnerrefno`
   - `totalamount`
   - `partnerpassword` (base64 encoded)

Then encode the concatenated string in Base64 format.

---